<tal:perm_storage_mappings repeat="perm_storage_mapping perm_storage_mappings">
    <tal:storage_item repeat="storage_item perm_storage_mappings[perm_storage_mapping].storage_items">
        switch (FEAT_INDUSTRIES, SELF, store_perm__${perm_storage_mapping}_${storage_item}, value,
            [
                STORE_PERM(
                    ${perm_storage_mappings[perm_storage_mapping].storage_items[storage_item]},
                    value,
                )
            ]) {
            return 16;
        }
    </tal:storage_item>
</tal:perm_storage_mappings>

<!--! I don't like the syntax for STORE_PERM, I prefer the storage number to come before the value as calculationss can be long and complex -->
switch (FEAT_INDUSTRIES, SELF, STORE_PERM_ALT, storage_number, value,
    [
        STORE_PERM(
            value,
            storage_number,
        )
    ]) {
    return;
}
